{"note":"Don't delete this file! It's used internally to help with page regeneration.","google":"","body":"# iQIYI MySQL服务托管平台\r\n\r\n\r\n## 目标\r\n   通过统一集成化的MySQL服务托管平台（以下简称“MySQL平台”）托管MySQL服务，可以给各个项目团队降低部署运维成本，节省人力成本，提供工作效率。\r\n   \r\n> *    硬件申请\r\n> *    环境部署\r\n> *    硬件、OS监控\r\n> *    MySQL监控\r\n> *    MySQL的备份恢复方案（for disaster/misoperation）\r\n> *    高可用方案（failover）\r\n> *    软件bugfix升级\r\n> *    Scale up（硬件升级）\r\n> *    Scale out（增加slave）\r\n> *    ……\r\n\r\n以上这些，统统由MySQL平台提供，你只需把主要精力放在业务需求的实现、代码和数据的设计上即可。\r\n\r\n## 统一概念\r\n> * Cluster：一组主从结构（Master-Slave）的MySQL数据库（常见一主n从）\r\n> * Instance：一个MySQL实例（host/port唯一确定一个Instance，对应一个服务器进程）\r\n> * DB（Schema）：MySQL服务器中的逻辑DB，一个Instance可以有多个DB\r\n\r\n\r\n## MySQL平台 WebConsole\r\n\r\n[https://mysql.qiyi.domain/](https://mysql.qiyi.domain/)(beta-0.1) 使用邮箱LDAP登录之后就可以看到这个页面：\r\n![HomePage](http://qss.inter.qiyi.domain/qiyidoc/home.png)\r\n\r\n\r\n### 一、基本信息\r\n\r\n![HomePage](http://qss.inter.qiyi.domain/qiyidoc/show.png)\r\n这里列出了所有MySQL Instance的、主机/端口，Server-id，角色（Master/Slave），域名，提供的服务（Write、Read），创建时间\r\n\r\n#### 详细1：扩展信息\r\n![HomePage](http://qss.inter.qiyi.domain/qiyidoc/show1.png)\r\n版本、数据大小、复制的设置\r\n\r\n#### 详细2：备份信息\r\n![HomePage](http://qss.inter.qiyi.domain/qiyidoc/show21.png)\r\n逻辑和物理备份的一些信息，包括备份时间、下次备份时间、备份文件的下载\r\n\r\n#### 详细3：监控阈值\r\n![HomePage](http://qss.inter.qiyi.domain/qiyidoc/show3.png)\r\n\r\n\r\n### 二、设置\r\n\r\n![HomePage](http://qss.inter.qiyi.domain/qiyidoc/set1.png)\r\n* 逻辑备份是使用mysqldump工具把数据库导出export成SQL文件的过程。\r\n* 物理备份是使用xtrabackup工具通过copy数据库物理文件的形式对其进行备份，效率高。\r\n\r\n![HomePage](http://qss.inter.qiyi.domain/qiyidoc/set2.png)\r\n在这里可以对监控的阈值进行调整。\r\n\r\n### 三、慢查询报表\r\n![HomePage](http://qss.inter.qiyi.domain/qiyidoc/rpt.png)\r\n\r\n慢查询报表，一般用于排查问题，当发现报警说活动连接数过高等异常时，通过使用这个工具可以精确定位问题SQL。\r\n选择使用的域名、时间区间，然后就可以生成一张指定时间的慢查询报表","name":"iQIYI MySQL服务托管平台","tagline":""}